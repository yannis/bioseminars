<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Module: Shoulda::ActiveRecord::Macros</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href="../../.././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Module</strong></td>
          <td class="class-name-in-header">Shoulda::ActiveRecord::Macros</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../../../files/vendor/plugins/shoulda/lib/shoulda/active_record/macros_rb.html">
                vendor/plugins/shoulda/lib/shoulda/active_record/macros.rb
                </a>
        <br />
            </td>
        </tr>

        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <h1>Macro test helpers for your active record models</h1>
<p>
These helpers will test most of the validations and associations for your
ActiveRecord models.
</p>
<pre>
  class UserTest &lt; Test::Unit::TestCase
    should_validate_presence_of :name, :phone_number
    should_not_allow_values_for :phone_number, &quot;abcd&quot;, &quot;1234&quot;
    should_allow_values_for :phone_number, &quot;(123) 456-7890&quot;

    should_not_allow_mass_assignment_of :password

    should_have_one :profile
    should_have_many :dogs
    should_have_many :messes, :through =&gt; :dogs
    should_belong_to :lover
  end
</pre>
<p>
For all of these helpers, the last parameter may be a hash of options.
</p>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000037">should_allow_mass_assignment_of</a>&nbsp;&nbsp;
      <a href="#M000041">should_allow_values_for</a>&nbsp;&nbsp;
      <a href="#M000050">should_belong_to</a>&nbsp;&nbsp;
      <a href="#M000043">should_ensure_length_at_least</a>&nbsp;&nbsp;
      <a href="#M000042">should_ensure_length_in_range</a>&nbsp;&nbsp;
      <a href="#M000044">should_ensure_length_is</a>&nbsp;&nbsp;
      <a href="#M000045">should_ensure_value_in_range</a>&nbsp;&nbsp;
      <a href="#M000049">should_have_and_belong_to_many</a>&nbsp;&nbsp;
      <a href="#M000051">should_have_class_methods</a>&nbsp;&nbsp;
      <a href="#M000054">should_have_db_column</a>&nbsp;&nbsp;
      <a href="#M000053">should_have_db_columns</a>&nbsp;&nbsp;
      <a href="#M000056">should_have_db_index</a>&nbsp;&nbsp;
      <a href="#M000055">should_have_db_indices</a>&nbsp;&nbsp;
      <a href="#M000057">should_have_index</a>&nbsp;&nbsp;
      <a href="#M000058">should_have_indices</a>&nbsp;&nbsp;
      <a href="#M000052">should_have_instance_methods</a>&nbsp;&nbsp;
      <a href="#M000047">should_have_many</a>&nbsp;&nbsp;
      <a href="#M000060">should_have_named_scope</a>&nbsp;&nbsp;
      <a href="#M000048">should_have_one</a>&nbsp;&nbsp;
      <a href="#M000039">should_have_readonly_attributes</a>&nbsp;&nbsp;
      <a href="#M000038">should_not_allow_mass_assignment_of</a>&nbsp;&nbsp;
      <a href="#M000040">should_not_allow_values_for</a>&nbsp;&nbsp;
      <a href="#M000059">should_validate_acceptance_of</a>&nbsp;&nbsp;
      <a href="#M000046">should_validate_numericality_of</a>&nbsp;&nbsp;
      <a href="#M000035">should_validate_presence_of</a>&nbsp;&nbsp;
      <a href="#M000036">should_validate_uniqueness_of</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->
    <div id="includes">
      <h3 class="section-bar">Included Modules</h3>

      <div id="includes-list">
        <span class="include-name"><a href="Helpers.html">Helpers</a></span>
        <span class="include-name"><a href="Matchers.html">Matchers</a></span>
      </div>
    </div>

    <div id="section">





      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000037" class="method-detail">
        <a name="M000037"></a>

        <div class="method-heading">
          <a href="#M000037" class="method-signature">
          <span class="method-name">should_allow_mass_assignment_of</span><span class="method-args">(*attributes)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Ensures that the attribute can be set on mass update.
</p>
<pre>
  should_allow_mass_assignment_of :first_name, :last_name
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000037-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000037-source">
<pre>
    <span class="ruby-comment cmt"># File vendor/plugins/shoulda/lib/shoulda/active_record/macros.rb, line 83</span>
83:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">should_allow_mass_assignment_of</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">attributes</span>)
84:         <span class="ruby-identifier">get_options!</span>(<span class="ruby-identifier">attributes</span>)
85: 
86:         <span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">attribute</span><span class="ruby-operator">|</span>
87:           <span class="ruby-identifier">matcher</span> = <span class="ruby-identifier">allow_mass_assignment_of</span>(<span class="ruby-identifier">attribute</span>)
88:           <span class="ruby-identifier">should</span> <span class="ruby-identifier">matcher</span>.<span class="ruby-identifier">description</span> <span class="ruby-keyword kw">do</span>
89:             <span class="ruby-identifier">assert_accepts</span> <span class="ruby-identifier">matcher</span>, <span class="ruby-identifier">subject</span>
90:           <span class="ruby-keyword kw">end</span>
91:         <span class="ruby-keyword kw">end</span>
92:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000041" class="method-detail">
        <a name="M000041"></a>

        <div class="method-heading">
          <a href="#M000041" class="method-signature">
          <span class="method-name">should_allow_values_for</span><span class="method-args">(attribute, *good_values)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Ensures that the attribute can be set to the given values.
</p>
<p>
Example:
</p>
<pre>
  should_allow_values_for :isbn, &quot;isbn 1 2345 6789 0&quot;, &quot;ISBN 1-2345-6789-0&quot;
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000041-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000041-source">
<pre>
     <span class="ruby-comment cmt"># File vendor/plugins/shoulda/lib/shoulda/active_record/macros.rb, line 149</span>
149:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">should_allow_values_for</span>(<span class="ruby-identifier">attribute</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">good_values</span>)
150:         <span class="ruby-identifier">get_options!</span>(<span class="ruby-identifier">good_values</span>)
151:         <span class="ruby-identifier">good_values</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
152:           <span class="ruby-identifier">matcher</span> = <span class="ruby-identifier">allow_value</span>(<span class="ruby-identifier">value</span>).<span class="ruby-identifier">for</span>(<span class="ruby-identifier">attribute</span>)
153:           <span class="ruby-identifier">should</span> <span class="ruby-identifier">matcher</span>.<span class="ruby-identifier">description</span> <span class="ruby-keyword kw">do</span>
154:             <span class="ruby-identifier">assert_accepts</span> <span class="ruby-identifier">matcher</span>, <span class="ruby-identifier">subject</span>
155:           <span class="ruby-keyword kw">end</span>
156:         <span class="ruby-keyword kw">end</span>
157:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000050" class="method-detail">
        <a name="M000050"></a>

        <div class="method-heading">
          <a href="#M000050" class="method-signature">
          <span class="method-name">should_belong_to</span><span class="method-args">(*associations)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Ensure that the belongs_to relationship exists.
</p>
<pre>
  should_belong_to :parent
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000050-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000050-source">
<pre>
     <span class="ruby-comment cmt"># File vendor/plugins/shoulda/lib/shoulda/active_record/macros.rb, line 335</span>
335:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">should_belong_to</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">associations</span>)
336:         <span class="ruby-identifier">dependent</span> = <span class="ruby-identifier">get_options!</span>(<span class="ruby-identifier">associations</span>, <span class="ruby-identifier">:dependent</span>)
337:         <span class="ruby-identifier">associations</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">association</span><span class="ruby-operator">|</span>
338:           <span class="ruby-identifier">matcher</span> = <span class="ruby-identifier">belong_to</span>(<span class="ruby-identifier">association</span>).<span class="ruby-identifier">dependent</span>(<span class="ruby-identifier">dependent</span>)
339:           <span class="ruby-identifier">should</span> <span class="ruby-identifier">matcher</span>.<span class="ruby-identifier">description</span> <span class="ruby-keyword kw">do</span>
340:             <span class="ruby-identifier">assert_accepts</span>(<span class="ruby-identifier">matcher</span>, <span class="ruby-identifier">subject</span>)
341:           <span class="ruby-keyword kw">end</span>
342:         <span class="ruby-keyword kw">end</span>
343:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000043" class="method-detail">
        <a name="M000043"></a>

        <div class="method-heading">
          <a href="#M000043" class="method-signature">
          <span class="method-name">should_ensure_length_at_least</span><span class="method-args">(attribute, min_length, opts = {})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Ensures that the length of the attribute is at least a certain length
</p>
<p>
Options:
</p>
<ul>
<li><tt>:short_message</tt> - value the test expects to find in
<tt>errors.on(:attribute)</tt>. Regexp or string. Default =
<tt>I18n.translate(&#8216;activerecord.errors.messages.too_short&#8217;) %
min_length</tt>

</li>
</ul>
<p>
Example:
</p>
<pre>
  should_ensure_length_at_least :name, 3
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000043-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000043-source">
<pre>
     <span class="ruby-comment cmt"># File vendor/plugins/shoulda/lib/shoulda/active_record/macros.rb, line 194</span>
194:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">should_ensure_length_at_least</span>(<span class="ruby-identifier">attribute</span>, <span class="ruby-identifier">min_length</span>, <span class="ruby-identifier">opts</span> = {})
195:         <span class="ruby-identifier">short_message</span> = <span class="ruby-identifier">get_options!</span>([<span class="ruby-identifier">opts</span>], <span class="ruby-identifier">:short_message</span>)
196: 
197:         <span class="ruby-identifier">matcher</span> = <span class="ruby-identifier">ensure_length_of</span>(<span class="ruby-identifier">attribute</span>).
198:           <span class="ruby-identifier">is_at_least</span>(<span class="ruby-identifier">min_length</span>).
199:           <span class="ruby-identifier">with_short_message</span>(<span class="ruby-identifier">short_message</span>)
200: 
201:         <span class="ruby-identifier">should</span> <span class="ruby-identifier">matcher</span>.<span class="ruby-identifier">description</span> <span class="ruby-keyword kw">do</span>
202:           <span class="ruby-identifier">assert_accepts</span> <span class="ruby-identifier">matcher</span>, <span class="ruby-identifier">subject</span>
203:         <span class="ruby-keyword kw">end</span>
204:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000042" class="method-detail">
        <a name="M000042"></a>

        <div class="method-heading">
          <a href="#M000042" class="method-signature">
          <span class="method-name">should_ensure_length_in_range</span><span class="method-args">(attribute, range, opts = {})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Ensures that the length of the attribute is in the given range
</p>
<p>
Options:
</p>
<ul>
<li><tt>:short_message</tt> - value the test expects to find in
<tt>errors.on(:attribute)</tt>. Regexp or string. Default =
<tt>I18n.translate(&#8216;activerecord.errors.messages.too_short&#8217;) %
range.first</tt>

</li>
<li><tt>:long_message</tt> - value the test expects to find in
<tt>errors.on(:attribute)</tt>. Regexp or string. Default =
<tt>I18n.translate(&#8216;activerecord.errors.messages.too_long&#8217;) %
range.last</tt>

</li>
</ul>
<p>
Example:
</p>
<pre>
  should_ensure_length_in_range :password, (6..20)
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000042-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000042-source">
<pre>
     <span class="ruby-comment cmt"># File vendor/plugins/shoulda/lib/shoulda/active_record/macros.rb, line 170</span>
170:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">should_ensure_length_in_range</span>(<span class="ruby-identifier">attribute</span>, <span class="ruby-identifier">range</span>, <span class="ruby-identifier">opts</span> = {})
171:         <span class="ruby-identifier">short_message</span>, <span class="ruby-identifier">long_message</span> = <span class="ruby-identifier">get_options!</span>([<span class="ruby-identifier">opts</span>], 
172:                                                    <span class="ruby-identifier">:short_message</span>,
173:                                                    <span class="ruby-identifier">:long_message</span>)
174:         <span class="ruby-identifier">matcher</span> = <span class="ruby-identifier">ensure_length_of</span>(<span class="ruby-identifier">attribute</span>).
175:           <span class="ruby-identifier">is_at_least</span>(<span class="ruby-identifier">range</span>.<span class="ruby-identifier">first</span>).
176:           <span class="ruby-identifier">with_short_message</span>(<span class="ruby-identifier">short_message</span>).
177:           <span class="ruby-identifier">is_at_most</span>(<span class="ruby-identifier">range</span>.<span class="ruby-identifier">last</span>).
178:           <span class="ruby-identifier">with_long_message</span>(<span class="ruby-identifier">long_message</span>)
179: 
180:         <span class="ruby-identifier">should</span> <span class="ruby-identifier">matcher</span>.<span class="ruby-identifier">description</span> <span class="ruby-keyword kw">do</span>
181:           <span class="ruby-identifier">assert_accepts</span> <span class="ruby-identifier">matcher</span>, <span class="ruby-identifier">subject</span>
182:         <span class="ruby-keyword kw">end</span>
183:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000044" class="method-detail">
        <a name="M000044"></a>

        <div class="method-heading">
          <a href="#M000044" class="method-signature">
          <span class="method-name">should_ensure_length_is</span><span class="method-args">(attribute, length, opts = {})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Ensures that the length of the attribute is exactly a certain length
</p>
<p>
Options:
</p>
<ul>
<li><tt>:message</tt> - value the test expects to find in
<tt>errors.on(:attribute)</tt>. Regexp or string. Default =
<tt>I18n.translate(&#8216;activerecord.errors.messages.wrong_length&#8217;)
% length</tt>

</li>
</ul>
<p>
Example:
</p>
<pre>
  should_ensure_length_is :ssn, 9
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000044-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000044-source">
<pre>
     <span class="ruby-comment cmt"># File vendor/plugins/shoulda/lib/shoulda/active_record/macros.rb, line 215</span>
215:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">should_ensure_length_is</span>(<span class="ruby-identifier">attribute</span>, <span class="ruby-identifier">length</span>, <span class="ruby-identifier">opts</span> = {})
216:         <span class="ruby-identifier">message</span> = <span class="ruby-identifier">get_options!</span>([<span class="ruby-identifier">opts</span>], <span class="ruby-identifier">:message</span>)
217:         <span class="ruby-identifier">matcher</span> = <span class="ruby-identifier">ensure_length_of</span>(<span class="ruby-identifier">attribute</span>).
218:           <span class="ruby-identifier">is_equal_to</span>(<span class="ruby-identifier">length</span>).
219:           <span class="ruby-identifier">with_message</span>(<span class="ruby-identifier">message</span>)
220: 
221:         <span class="ruby-identifier">should</span> <span class="ruby-identifier">matcher</span>.<span class="ruby-identifier">description</span> <span class="ruby-keyword kw">do</span>
222:           <span class="ruby-identifier">assert_accepts</span> <span class="ruby-identifier">matcher</span>, <span class="ruby-identifier">subject</span>
223:         <span class="ruby-keyword kw">end</span>
224:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000045" class="method-detail">
        <a name="M000045"></a>

        <div class="method-heading">
          <a href="#M000045" class="method-signature">
          <span class="method-name">should_ensure_value_in_range</span><span class="method-args">(attribute, range, opts = {})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Ensure that the attribute is in the range specified
</p>
<p>
Options:
</p>
<ul>
<li><tt>:low_message</tt> - value the test expects to find in
<tt>errors.on(:attribute)</tt>. Regexp or string. Default =
<tt>I18n.translate(&#8216;activerecord.errors.messages.inclusion&#8217;)</tt>

</li>
<li><tt>:high_message</tt> - value the test expects to find in
<tt>errors.on(:attribute)</tt>. Regexp or string. Default =
<tt>I18n.translate(&#8216;activerecord.errors.messages.inclusion&#8217;)</tt>

</li>
</ul>
<p>
Example:
</p>
<pre>
  should_ensure_value_in_range :age, (0..100)
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000045-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000045-source">
<pre>
     <span class="ruby-comment cmt"># File vendor/plugins/shoulda/lib/shoulda/active_record/macros.rb, line 237</span>
237:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">should_ensure_value_in_range</span>(<span class="ruby-identifier">attribute</span>, <span class="ruby-identifier">range</span>, <span class="ruby-identifier">opts</span> = {})
238:         <span class="ruby-identifier">message</span>, <span class="ruby-identifier">low_message</span>, <span class="ruby-identifier">high_message</span> = <span class="ruby-identifier">get_options!</span>([<span class="ruby-identifier">opts</span>],
239:                                                           <span class="ruby-identifier">:message</span>,
240:                                                           <span class="ruby-identifier">:low_message</span>,
241:                                                           <span class="ruby-identifier">:high_message</span>)
242:         <span class="ruby-identifier">matcher</span> = <span class="ruby-identifier">ensure_inclusion_of</span>(<span class="ruby-identifier">attribute</span>).
243:           <span class="ruby-identifier">in_range</span>(<span class="ruby-identifier">range</span>).
244:           <span class="ruby-identifier">with_message</span>(<span class="ruby-identifier">message</span>).
245:           <span class="ruby-identifier">with_low_message</span>(<span class="ruby-identifier">low_message</span>).
246:           <span class="ruby-identifier">with_high_message</span>(<span class="ruby-identifier">high_message</span>)
247:         <span class="ruby-identifier">should</span> <span class="ruby-identifier">matcher</span>.<span class="ruby-identifier">description</span> <span class="ruby-keyword kw">do</span>
248:           <span class="ruby-identifier">assert_accepts</span> <span class="ruby-identifier">matcher</span>, <span class="ruby-identifier">subject</span>
249:         <span class="ruby-keyword kw">end</span>
250:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000049" class="method-detail">
        <a name="M000049"></a>

        <div class="method-heading">
          <a href="#M000049" class="method-signature">
          <span class="method-name">should_have_and_belong_to_many</span><span class="method-args">(*associations)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Ensures that the has_and_belongs_to_many relationship exists, and that the
join table is in place.
</p>
<pre>
  should_have_and_belong_to_many :posts, :cars
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000049-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000049-source">
<pre>
     <span class="ruby-comment cmt"># File vendor/plugins/shoulda/lib/shoulda/active_record/macros.rb, line 320</span>
320:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">should_have_and_belong_to_many</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">associations</span>)
321:         <span class="ruby-identifier">get_options!</span>(<span class="ruby-identifier">associations</span>)
322: 
323:         <span class="ruby-identifier">associations</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">association</span><span class="ruby-operator">|</span>
324:           <span class="ruby-identifier">matcher</span> = <span class="ruby-identifier">have_and_belong_to_many</span>(<span class="ruby-identifier">association</span>)
325:           <span class="ruby-identifier">should</span> <span class="ruby-identifier">matcher</span>.<span class="ruby-identifier">description</span> <span class="ruby-keyword kw">do</span>
326:             <span class="ruby-identifier">assert_accepts</span>(<span class="ruby-identifier">matcher</span>, <span class="ruby-identifier">subject</span>)
327:           <span class="ruby-keyword kw">end</span>
328:         <span class="ruby-keyword kw">end</span>
329:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000051" class="method-detail">
        <a name="M000051"></a>

        <div class="method-heading">
          <a href="#M000051" class="method-signature">
          <span class="method-name">should_have_class_methods</span><span class="method-args">(*methods)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Ensure that the given class methods are defined on the model.
</p>
<pre>
  should_have_class_methods :find, :destroy
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000051-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000051-source">
<pre>
     <span class="ruby-comment cmt"># File vendor/plugins/shoulda/lib/shoulda/active_record/macros.rb, line 349</span>
349:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">should_have_class_methods</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">methods</span>)
350:         <span class="ruby-identifier">get_options!</span>(<span class="ruby-identifier">methods</span>)
351:         <span class="ruby-identifier">klass</span> = <span class="ruby-identifier">described_type</span>
352:         <span class="ruby-identifier">methods</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">method</span><span class="ruby-operator">|</span>
353:           <span class="ruby-identifier">should</span> <span class="ruby-node">&quot;respond to class method ##{method}&quot;</span> <span class="ruby-keyword kw">do</span>
354:             <span class="ruby-identifier">assert_respond_to</span> <span class="ruby-identifier">klass</span>, <span class="ruby-identifier">method</span>, <span class="ruby-node">&quot;#{klass.name} does not have class method #{method}&quot;</span>
355:           <span class="ruby-keyword kw">end</span>
356:         <span class="ruby-keyword kw">end</span>
357:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000054" class="method-detail">
        <a name="M000054"></a>

        <div class="method-heading">
          <span class="method-name">should_have_db_column</span><span class="method-args">(*columns)</span>
        </div>
      
        <div class="method-description">
          <p>
Alias for <a href="Macros.html#M000053">should_have_db_columns</a>
</p>
        </div>
      </div>

      <div id="method-M000053" class="method-detail">
        <a name="M000053"></a>

        <div class="method-heading">
          <a href="#M000053" class="method-signature">
          <span class="method-name">should_have_db_columns</span><span class="method-args">(*columns)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Ensure that the given columns are defined on the models backing SQL table.
Also aliased to <a href="Macros.html#M000054">should_have_db_column</a> for
readability. Takes the same options available in migrations: :type,
:precision, :limit, :default, :null, and :scale
</p>
<p>
Examples:
</p>
<pre>
  should_have_db_columns :id, :email, :name, :created_at

  should_have_db_column :email,  :type =&gt; &quot;string&quot;, :limit =&gt; 255
  should_have_db_column :salary, :decimal, :precision =&gt; 15, :scale =&gt; 2
  should_have_db_column :admin,  :default =&gt; false, :null =&gt; false
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000053-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000053-source">
<pre>
     <span class="ruby-comment cmt"># File vendor/plugins/shoulda/lib/shoulda/active_record/macros.rb, line 386</span>
386:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">should_have_db_columns</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">columns</span>)
387:         <span class="ruby-identifier">column_type</span>, <span class="ruby-identifier">precision</span>, <span class="ruby-identifier">limit</span>, <span class="ruby-identifier">default</span>, <span class="ruby-identifier">null</span>, <span class="ruby-identifier">scale</span>, <span class="ruby-identifier">sql_type</span> = 
388:           <span class="ruby-identifier">get_options!</span>(<span class="ruby-identifier">columns</span>, <span class="ruby-identifier">:type</span>, <span class="ruby-identifier">:precision</span>, <span class="ruby-identifier">:limit</span>,
389:                                 <span class="ruby-identifier">:default</span>, <span class="ruby-identifier">:null</span>, <span class="ruby-identifier">:scale</span>, <span class="ruby-identifier">:sql_type</span>)
390:         <span class="ruby-identifier">columns</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">name</span><span class="ruby-operator">|</span>
391:           <span class="ruby-identifier">matcher</span> = <span class="ruby-identifier">have_db_column</span>(<span class="ruby-identifier">name</span>).
392:                       <span class="ruby-identifier">of_type</span>(<span class="ruby-identifier">column_type</span>).
393:                       <span class="ruby-identifier">with_options</span>(<span class="ruby-identifier">:precision</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">precision</span>, <span class="ruby-identifier">:limit</span>    =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">limit</span>,
394:                                    <span class="ruby-identifier">:default</span>   =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">default</span>,   <span class="ruby-identifier">:null</span>     =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">null</span>,
395:                                    <span class="ruby-identifier">:scale</span>     =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">scale</span>,     <span class="ruby-identifier">:sql_type</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">sql_type</span>)
396:           <span class="ruby-identifier">should</span> <span class="ruby-identifier">matcher</span>.<span class="ruby-identifier">description</span> <span class="ruby-keyword kw">do</span>
397:             <span class="ruby-identifier">assert_accepts</span>(<span class="ruby-identifier">matcher</span>, <span class="ruby-identifier">subject</span>)
398:           <span class="ruby-keyword kw">end</span>
399:         <span class="ruby-keyword kw">end</span>
400:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000056" class="method-detail">
        <a name="M000056"></a>

        <div class="method-heading">
          <span class="method-name">should_have_db_index</span><span class="method-args">(*columns)</span>
        </div>
      
        <div class="method-description">
          <p>
Alias for <a href="Macros.html#M000055">should_have_db_indices</a>
</p>
        </div>
      </div>

      <div id="method-M000055" class="method-detail">
        <a name="M000055"></a>

        <div class="method-heading">
          <a href="#M000055" class="method-signature">
          <span class="method-name">should_have_db_indices</span><span class="method-args">(*columns)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Ensures that there are DB indices on the given columns or tuples of
columns. Also aliased to <a
href="Macros.html#M000056">should_have_db_index</a> for readability
</p>
<p>
Options:
</p>
<ul>
<li><tt>:unique</tt> - whether or not the index has a unique constraint. Use
<tt>true</tt> to explicitly test for a unique constraint. Use
<tt>false</tt> to explicitly test for a non-unique constraint. Use
<tt>nil</tt> if you don&#8216;t care whether the index is unique or not.
Default = <tt>nil</tt>

</li>
</ul>
<p>
Examples:
</p>
<pre>
  should_have_db_indices :email, :name, [:commentable_type, :commentable_id]
  should_have_db_index :age
  should_have_db_index :ssn, :unique =&gt; true
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000055-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000055-source">
<pre>
     <span class="ruby-comment cmt"># File vendor/plugins/shoulda/lib/shoulda/active_record/macros.rb, line 420</span>
420:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">should_have_db_indices</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">columns</span>)
421:         <span class="ruby-identifier">unique</span> = <span class="ruby-identifier">get_options!</span>(<span class="ruby-identifier">columns</span>, <span class="ruby-identifier">:unique</span>)
422:         
423:         <span class="ruby-identifier">columns</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">column</span><span class="ruby-operator">|</span>
424:           <span class="ruby-identifier">matcher</span> = <span class="ruby-identifier">have_db_index</span>(<span class="ruby-identifier">column</span>).<span class="ruby-identifier">unique</span>(<span class="ruby-identifier">unique</span>)
425:           <span class="ruby-identifier">should</span> <span class="ruby-identifier">matcher</span>.<span class="ruby-identifier">description</span> <span class="ruby-keyword kw">do</span>
426:             <span class="ruby-identifier">assert_accepts</span>(<span class="ruby-identifier">matcher</span>, <span class="ruby-identifier">subject</span>)
427:           <span class="ruby-keyword kw">end</span>
428:         <span class="ruby-keyword kw">end</span>
429:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000057" class="method-detail">
        <a name="M000057"></a>

        <div class="method-heading">
          <a href="#M000057" class="method-signature">
          <span class="method-name">should_have_index</span><span class="method-args">(*args)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Deprecated. See <a href="Macros.html#M000056">should_have_db_index</a>
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000057-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000057-source">
<pre>
     <span class="ruby-comment cmt"># File vendor/plugins/shoulda/lib/shoulda/active_record/macros.rb, line 434</span>
434:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">should_have_index</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
435:         <span class="ruby-identifier">warn</span> <span class="ruby-value str">&quot;[DEPRECATION] should_have_index is deprecated. &quot;</span> <span class="ruby-operator">&lt;&lt;</span>
436:              <span class="ruby-value str">&quot;Use should_have_db_index instead.&quot;</span>
437:         <span class="ruby-identifier">should_have_db_index</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
438:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000058" class="method-detail">
        <a name="M000058"></a>

        <div class="method-heading">
          <a href="#M000058" class="method-signature">
          <span class="method-name">should_have_indices</span><span class="method-args">(*args)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Deprecated. See <a href="Macros.html#M000055">should_have_db_indices</a>
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000058-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000058-source">
<pre>
     <span class="ruby-comment cmt"># File vendor/plugins/shoulda/lib/shoulda/active_record/macros.rb, line 441</span>
441:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">should_have_indices</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
442:         <span class="ruby-identifier">warn</span> <span class="ruby-value str">&quot;[DEPRECATION] should_have_indices is deprecated. &quot;</span> <span class="ruby-operator">&lt;&lt;</span>
443:              <span class="ruby-value str">&quot;Use should_have_db_indices instead.&quot;</span>
444:         <span class="ruby-identifier">should_have_db_indices</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
445:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000052" class="method-detail">
        <a name="M000052"></a>

        <div class="method-heading">
          <a href="#M000052" class="method-signature">
          <span class="method-name">should_have_instance_methods</span><span class="method-args">(*methods)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Ensure that the given instance methods are defined on the model.
</p>
<pre>
  should_have_instance_methods :email, :name, :name=
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000052-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000052-source">
<pre>
     <span class="ruby-comment cmt"># File vendor/plugins/shoulda/lib/shoulda/active_record/macros.rb, line 363</span>
363:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">should_have_instance_methods</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">methods</span>)
364:         <span class="ruby-identifier">get_options!</span>(<span class="ruby-identifier">methods</span>)
365:         <span class="ruby-identifier">klass</span> = <span class="ruby-identifier">described_type</span>
366:         <span class="ruby-identifier">methods</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">method</span><span class="ruby-operator">|</span>
367:           <span class="ruby-identifier">should</span> <span class="ruby-node">&quot;respond to instance method ##{method}&quot;</span> <span class="ruby-keyword kw">do</span>
368:             <span class="ruby-identifier">assert_respond_to</span> <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">new</span>, <span class="ruby-identifier">method</span>, <span class="ruby-node">&quot;#{klass.name} does not have instance method #{method}&quot;</span>
369:           <span class="ruby-keyword kw">end</span>
370:         <span class="ruby-keyword kw">end</span>
371:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000047" class="method-detail">
        <a name="M000047"></a>

        <div class="method-heading">
          <a href="#M000047" class="method-signature">
          <span class="method-name">should_have_many</span><span class="method-args">(*associations)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Ensures that the has_many relationship exists. Will also test that the
associated table has the required columns. Works with polymorphic
associations.
</p>
<p>
Options:
</p>
<ul>
<li><tt>:through</tt> - association name for <tt>has_many :through</tt>

</li>
<li><tt>:dependent</tt> - tests that the association makes use of the dependent
option.

</li>
</ul>
<p>
Example:
</p>
<pre>
  should_have_many :friends
  should_have_many :enemies, :through =&gt; :friends
  should_have_many :enemies, :dependent =&gt; :destroy
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000047-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000047-source">
<pre>
     <span class="ruby-comment cmt"># File vendor/plugins/shoulda/lib/shoulda/active_record/macros.rb, line 285</span>
285:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">should_have_many</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">associations</span>)
286:         <span class="ruby-identifier">through</span>, <span class="ruby-identifier">dependent</span> = <span class="ruby-identifier">get_options!</span>(<span class="ruby-identifier">associations</span>, <span class="ruby-identifier">:through</span>, <span class="ruby-identifier">:dependent</span>)
287:         <span class="ruby-identifier">associations</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">association</span><span class="ruby-operator">|</span>
288:           <span class="ruby-identifier">matcher</span> = <span class="ruby-identifier">have_many</span>(<span class="ruby-identifier">association</span>).<span class="ruby-identifier">through</span>(<span class="ruby-identifier">through</span>).<span class="ruby-identifier">dependent</span>(<span class="ruby-identifier">dependent</span>)
289:           <span class="ruby-identifier">should</span> <span class="ruby-identifier">matcher</span>.<span class="ruby-identifier">description</span> <span class="ruby-keyword kw">do</span>
290:             <span class="ruby-identifier">assert_accepts</span>(<span class="ruby-identifier">matcher</span>, <span class="ruby-identifier">subject</span>)
291:           <span class="ruby-keyword kw">end</span>
292:         <span class="ruby-keyword kw">end</span>
293:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000060" class="method-detail">
        <a name="M000060"></a>

        <div class="method-heading">
          <a href="#M000060" class="method-signature">
          <span class="method-name">should_have_named_scope</span><span class="method-args">(scope_call, find_options = nil)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Deprecated.
</p>
<p>
Ensures that the model has a method named scope_name that returns a
NamedScope object with the proxy options set to the options you supply.
scope_name can be either a symbol, or a method call which will be evaled
against the model. The eval&#8216;d method call has access to all the same
instance variables that a should statement would.
</p>
<p>
Options: Any of the options that the named scope would pass on to find.
</p>
<p>
Example:
</p>
<pre>
  should_have_named_scope :visible, :conditions =&gt; {:visible =&gt; true}
</pre>
<p>
Passes for
</p>
<pre>
  named_scope :visible, :conditions =&gt; {:visible =&gt; true}
</pre>
<p>
Or for
</p>
<pre>
  def self.visible
    scoped(:conditions =&gt; {:visible =&gt; true})
  end
</pre>
<p>
You can test lambdas or methods that return ActiveRecord#scoped calls:
</p>
<pre>
  should_have_named_scope 'recent(5)', :limit =&gt; 5
  should_have_named_scope 'recent(1)', :limit =&gt; 1
</pre>
<p>
Passes for
</p>
<pre>
  named_scope :recent, lambda {|c| {:limit =&gt; c}}
</pre>
<p>
Or for
</p>
<pre>
  def self.recent(c)
    scoped(:limit =&gt; c)
  end
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000060-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000060-source">
<pre>
     <span class="ruby-comment cmt"># File vendor/plugins/shoulda/lib/shoulda/active_record/macros.rb, line 504</span>
504:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">should_have_named_scope</span>(<span class="ruby-identifier">scope_call</span>, <span class="ruby-identifier">find_options</span> = <span class="ruby-keyword kw">nil</span>)
505:         <span class="ruby-identifier">matcher</span> = <span class="ruby-identifier">have_named_scope</span>(<span class="ruby-identifier">scope_call</span>).<span class="ruby-identifier">finding</span>(<span class="ruby-identifier">find_options</span>)
506:         <span class="ruby-identifier">should</span> <span class="ruby-identifier">matcher</span>.<span class="ruby-identifier">description</span> <span class="ruby-keyword kw">do</span>
507:           <span class="ruby-identifier">assert_accepts</span> <span class="ruby-identifier">matcher</span>.<span class="ruby-identifier">in_context</span>(<span class="ruby-keyword kw">self</span>), <span class="ruby-identifier">subject</span>
508:         <span class="ruby-keyword kw">end</span>
509:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000048" class="method-detail">
        <a name="M000048"></a>

        <div class="method-heading">
          <a href="#M000048" class="method-signature">
          <span class="method-name">should_have_one</span><span class="method-args">(*associations)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Ensure that the has_one relationship exists. Will also test that the
associated table has the required columns. Works with polymorphic
associations.
</p>
<p>
Options:
</p>
<ul>
<li><tt>:dependent</tt> - tests that the association makes use of the dependent
option.

</li>
</ul>
<p>
Example:
</p>
<pre>
  should_have_one :god # unless hindu
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000048-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000048-source">
<pre>
     <span class="ruby-comment cmt"># File vendor/plugins/shoulda/lib/shoulda/active_record/macros.rb, line 305</span>
305:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">should_have_one</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">associations</span>)
306:         <span class="ruby-identifier">dependent</span>, <span class="ruby-identifier">through</span> = <span class="ruby-identifier">get_options!</span>(<span class="ruby-identifier">associations</span>, <span class="ruby-identifier">:dependent</span>, <span class="ruby-identifier">:through</span>)
307:         <span class="ruby-identifier">associations</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">association</span><span class="ruby-operator">|</span>
308:           <span class="ruby-identifier">matcher</span> = <span class="ruby-identifier">have_one</span>(<span class="ruby-identifier">association</span>).<span class="ruby-identifier">dependent</span>(<span class="ruby-identifier">dependent</span>).<span class="ruby-identifier">through</span>(<span class="ruby-identifier">through</span>)
309:           <span class="ruby-identifier">should</span> <span class="ruby-identifier">matcher</span>.<span class="ruby-identifier">description</span> <span class="ruby-keyword kw">do</span>
310:             <span class="ruby-identifier">assert_accepts</span>(<span class="ruby-identifier">matcher</span>, <span class="ruby-identifier">subject</span>)
311:           <span class="ruby-keyword kw">end</span>
312:         <span class="ruby-keyword kw">end</span>
313:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000039" class="method-detail">
        <a name="M000039"></a>

        <div class="method-heading">
          <a href="#M000039" class="method-signature">
          <span class="method-name">should_have_readonly_attributes</span><span class="method-args">(*attributes)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Ensures that the attribute cannot be changed once the record has been
created.
</p>
<pre>
  should_have_readonly_attributes :password, :admin_flag
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000039-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000039-source">
<pre>
     <span class="ruby-comment cmt"># File vendor/plugins/shoulda/lib/shoulda/active_record/macros.rb, line 113</span>
113:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">should_have_readonly_attributes</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">attributes</span>)
114:         <span class="ruby-identifier">get_options!</span>(<span class="ruby-identifier">attributes</span>)
115: 
116:         <span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">attribute</span><span class="ruby-operator">|</span>
117:           <span class="ruby-identifier">matcher</span> = <span class="ruby-identifier">have_readonly_attribute</span>(<span class="ruby-identifier">attribute</span>)
118:           <span class="ruby-identifier">should</span> <span class="ruby-identifier">matcher</span>.<span class="ruby-identifier">description</span> <span class="ruby-keyword kw">do</span>
119:             <span class="ruby-identifier">assert_accepts</span> <span class="ruby-identifier">matcher</span>, <span class="ruby-identifier">subject</span>
120:           <span class="ruby-keyword kw">end</span>
121:         <span class="ruby-keyword kw">end</span>
122:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000038" class="method-detail">
        <a name="M000038"></a>

        <div class="method-heading">
          <a href="#M000038" class="method-signature">
          <span class="method-name">should_not_allow_mass_assignment_of</span><span class="method-args">(*attributes)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Ensures that the attribute cannot be set on mass update.
</p>
<pre>
  should_not_allow_mass_assignment_of :password, :admin_flag
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000038-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000038-source">
<pre>
     <span class="ruby-comment cmt"># File vendor/plugins/shoulda/lib/shoulda/active_record/macros.rb, line 98</span>
 98:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">should_not_allow_mass_assignment_of</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">attributes</span>)
 99:         <span class="ruby-identifier">get_options!</span>(<span class="ruby-identifier">attributes</span>)
100: 
101:         <span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">attribute</span><span class="ruby-operator">|</span>
102:           <span class="ruby-identifier">matcher</span> = <span class="ruby-identifier">allow_mass_assignment_of</span>(<span class="ruby-identifier">attribute</span>)
103:           <span class="ruby-identifier">should</span> <span class="ruby-node">&quot;not #{matcher.description}&quot;</span> <span class="ruby-keyword kw">do</span>
104:             <span class="ruby-identifier">assert_rejects</span> <span class="ruby-identifier">matcher</span>, <span class="ruby-identifier">subject</span>
105:           <span class="ruby-keyword kw">end</span>
106:         <span class="ruby-keyword kw">end</span>
107:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000040" class="method-detail">
        <a name="M000040"></a>

        <div class="method-heading">
          <a href="#M000040" class="method-signature">
          <span class="method-name">should_not_allow_values_for</span><span class="method-args">(attribute, *bad_values)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Ensures that the attribute cannot be set to the given values
</p>
<p>
Options:
</p>
<ul>
<li><tt>:message</tt> - value the test expects to find in
<tt>errors.on(:attribute)</tt>. Regexp or string. If omitted, the test will
pass if there is ANY error in <tt>errors.on(:attribute)</tt>.

</li>
</ul>
<p>
Example:
</p>
<pre>
  should_not_allow_values_for :isbn, &quot;bad 1&quot;, &quot;bad 2&quot;
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000040-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000040-source">
<pre>
     <span class="ruby-comment cmt"># File vendor/plugins/shoulda/lib/shoulda/active_record/macros.rb, line 134</span>
134:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">should_not_allow_values_for</span>(<span class="ruby-identifier">attribute</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">bad_values</span>)
135:         <span class="ruby-identifier">message</span> = <span class="ruby-identifier">get_options!</span>(<span class="ruby-identifier">bad_values</span>, <span class="ruby-identifier">:message</span>)
136:         <span class="ruby-identifier">bad_values</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
137:           <span class="ruby-identifier">matcher</span> = <span class="ruby-identifier">allow_value</span>(<span class="ruby-identifier">value</span>).<span class="ruby-identifier">for</span>(<span class="ruby-identifier">attribute</span>).<span class="ruby-identifier">with_message</span>(<span class="ruby-identifier">message</span>)
138:           <span class="ruby-identifier">should</span> <span class="ruby-node">&quot;not #{matcher.description}&quot;</span> <span class="ruby-keyword kw">do</span>
139:             <span class="ruby-identifier">assert_rejects</span> <span class="ruby-identifier">matcher</span>, <span class="ruby-identifier">subject</span>
140:           <span class="ruby-keyword kw">end</span>
141:         <span class="ruby-keyword kw">end</span>
142:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000059" class="method-detail">
        <a name="M000059"></a>

        <div class="method-heading">
          <a href="#M000059" class="method-signature">
          <span class="method-name">should_validate_acceptance_of</span><span class="method-args">(*attributes)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Ensures that the model cannot be saved if one of the attributes listed is
not accepted.
</p>
<p>
Options:
</p>
<ul>
<li><tt>:message</tt> - value the test expects to find in
<tt>errors.on(:attribute)</tt>. Regexp or string. Default =
<tt>I18n.translate(&#8216;activerecord.errors.messages.accepted&#8217;)</tt>

</li>
</ul>
<p>
Example:
</p>
<pre>
  should_validate_acceptance_of :eula
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000059-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000059-source">
<pre>
     <span class="ruby-comment cmt"># File vendor/plugins/shoulda/lib/shoulda/active_record/macros.rb, line 456</span>
456:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">should_validate_acceptance_of</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">attributes</span>)
457:         <span class="ruby-identifier">message</span> = <span class="ruby-identifier">get_options!</span>(<span class="ruby-identifier">attributes</span>, <span class="ruby-identifier">:message</span>)
458: 
459:         <span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">attribute</span><span class="ruby-operator">|</span>
460:           <span class="ruby-identifier">matcher</span> = <span class="ruby-identifier">validate_acceptance_of</span>(<span class="ruby-identifier">attribute</span>).<span class="ruby-identifier">with_message</span>(<span class="ruby-identifier">message</span>)
461:           <span class="ruby-identifier">should</span> <span class="ruby-identifier">matcher</span>.<span class="ruby-identifier">description</span> <span class="ruby-keyword kw">do</span>
462:             <span class="ruby-identifier">assert_accepts</span> <span class="ruby-identifier">matcher</span>, <span class="ruby-identifier">subject</span>
463:           <span class="ruby-keyword kw">end</span>
464:         <span class="ruby-keyword kw">end</span>
465:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000046" class="method-detail">
        <a name="M000046"></a>

        <div class="method-heading">
          <a href="#M000046" class="method-signature">
          <span class="method-name">should_validate_numericality_of</span><span class="method-args">(*attributes)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Ensure that the attribute is numeric
</p>
<p>
Options:
</p>
<ul>
<li><tt>:message</tt> - value the test expects to find in
<tt>errors.on(:attribute)</tt>. Regexp or string. Default =
<tt>I18n.translate(&#8216;activerecord.errors.messages.not_a_number&#8217;)</tt>

</li>
</ul>
<p>
Example:
</p>
<pre>
  should_validate_numericality_of :age
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000046-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000046-source">
<pre>
     <span class="ruby-comment cmt"># File vendor/plugins/shoulda/lib/shoulda/active_record/macros.rb, line 261</span>
261:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">should_validate_numericality_of</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">attributes</span>)
262:         <span class="ruby-identifier">message</span> = <span class="ruby-identifier">get_options!</span>(<span class="ruby-identifier">attributes</span>, <span class="ruby-identifier">:message</span>)
263:         <span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">attribute</span><span class="ruby-operator">|</span>
264:           <span class="ruby-identifier">matcher</span> = <span class="ruby-identifier">validate_numericality_of</span>(<span class="ruby-identifier">attribute</span>).
265:             <span class="ruby-identifier">with_message</span>(<span class="ruby-identifier">message</span>)
266:           <span class="ruby-identifier">should</span> <span class="ruby-identifier">matcher</span>.<span class="ruby-identifier">description</span> <span class="ruby-keyword kw">do</span>
267:             <span class="ruby-identifier">assert_accepts</span> <span class="ruby-identifier">matcher</span>, <span class="ruby-identifier">subject</span>
268:           <span class="ruby-keyword kw">end</span>
269:         <span class="ruby-keyword kw">end</span>
270:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000035" class="method-detail">
        <a name="M000035"></a>

        <div class="method-heading">
          <a href="#M000035" class="method-signature">
          <span class="method-name">should_validate_presence_of</span><span class="method-args">(*attributes)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Ensures that the model cannot be saved if one of the attributes listed is
not present.
</p>
<p>
Options:
</p>
<ul>
<li><tt>:message</tt> - value the test expects to find in
<tt>errors.on(:attribute)</tt>. Regexp or string. Default =
<tt>I18n.translate(&#8216;activerecord.errors.messages.blank&#8217;)</tt>

</li>
</ul>
<p>
Example:
</p>
<pre>
  should_validate_presence_of :name, :phone_number
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000035-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000035-source">
<pre>
    <span class="ruby-comment cmt"># File vendor/plugins/shoulda/lib/shoulda/active_record/macros.rb, line 35</span>
35:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">should_validate_presence_of</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">attributes</span>)
36:         <span class="ruby-identifier">message</span> = <span class="ruby-identifier">get_options!</span>(<span class="ruby-identifier">attributes</span>, <span class="ruby-identifier">:message</span>)
37: 
38:         <span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">attribute</span><span class="ruby-operator">|</span>
39:           <span class="ruby-identifier">matcher</span> = <span class="ruby-identifier">validate_presence_of</span>(<span class="ruby-identifier">attribute</span>).<span class="ruby-identifier">with_message</span>(<span class="ruby-identifier">message</span>)
40:           <span class="ruby-identifier">should</span> <span class="ruby-identifier">matcher</span>.<span class="ruby-identifier">description</span> <span class="ruby-keyword kw">do</span>
41:             <span class="ruby-identifier">assert_accepts</span>(<span class="ruby-identifier">matcher</span>, <span class="ruby-identifier">subject</span>)
42:           <span class="ruby-keyword kw">end</span>
43:         <span class="ruby-keyword kw">end</span>
44:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000036" class="method-detail">
        <a name="M000036"></a>

        <div class="method-heading">
          <a href="#M000036" class="method-signature">
          <span class="method-name">should_validate_uniqueness_of</span><span class="method-args">(*attributes)</span>
          </a>
        </div>
      
        <div class="method-description">
          <ul>
<li><tt>:message</tt> - value the test expects to find in
<tt>errors.on(:attribute)</tt>. Regexp or string. Default =
<tt>I18n.translate(&#8216;activerecord.errors.messages.taken&#8217;)</tt>

</li>
<li><tt>:scoped_to</tt> - field(s) to scope the uniqueness to.

</li>
<li><tt>:case_sensitive</tt> - whether or not uniqueness is defined by an exact
match. Ignored by non-text attributes. Default = <tt>true</tt>

</li>
</ul>
<p>
Examples:
</p>
<pre>
  should_validate_uniqueness_of :keyword, :username
  should_validate_uniqueness_of :name, :message =&gt; &quot;O NOES! SOMEONE STOELED YER NAME!&quot;
  should_validate_uniqueness_of :email, :scoped_to =&gt; :name
  should_validate_uniqueness_of :address, :scoped_to =&gt; [:first_name, :last_name]
  should_validate_uniqueness_of :email, :case_sensitive =&gt; false
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000036-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000036-source">
<pre>
    <span class="ruby-comment cmt"># File vendor/plugins/shoulda/lib/shoulda/active_record/macros.rb, line 64</span>
64:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">should_validate_uniqueness_of</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">attributes</span>)
65:         <span class="ruby-identifier">message</span>, <span class="ruby-identifier">scope</span>, <span class="ruby-identifier">case_sensitive</span> = <span class="ruby-identifier">get_options!</span>(<span class="ruby-identifier">attributes</span>, <span class="ruby-identifier">:message</span>, <span class="ruby-identifier">:scoped_to</span>, <span class="ruby-identifier">:case_sensitive</span>)
66:         <span class="ruby-identifier">scope</span> = [<span class="ruby-operator">*</span><span class="ruby-identifier">scope</span>].<span class="ruby-identifier">compact</span>
67:         <span class="ruby-identifier">case_sensitive</span> = <span class="ruby-keyword kw">true</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">case_sensitive</span>.<span class="ruby-identifier">nil?</span>
68: 
69:         <span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">attribute</span><span class="ruby-operator">|</span>
70:           <span class="ruby-identifier">matcher</span> = <span class="ruby-identifier">validate_uniqueness_of</span>(<span class="ruby-identifier">attribute</span>).
71:             <span class="ruby-identifier">with_message</span>(<span class="ruby-identifier">message</span>).<span class="ruby-identifier">scoped_to</span>(<span class="ruby-identifier">scope</span>)
72:           <span class="ruby-identifier">matcher</span> = <span class="ruby-identifier">matcher</span>.<span class="ruby-identifier">case_insensitive</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">case_sensitive</span>
73:           <span class="ruby-identifier">should</span> <span class="ruby-identifier">matcher</span>.<span class="ruby-identifier">description</span> <span class="ruby-keyword kw">do</span>
74:             <span class="ruby-identifier">assert_accepts</span>(<span class="ruby-identifier">matcher</span>, <span class="ruby-identifier">subject</span>)
75:           <span class="ruby-keyword kw">end</span>
76:         <span class="ruby-keyword kw">end</span>
77:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>