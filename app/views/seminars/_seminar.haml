.seminar{:class => ((params[:action] == 'index' and params[:controller] == 'seminars') ? "grid_9 seminar_#{seminar.id} #{seminar.internal? ? 'internal' : 'public'} category_#{seminar.category.id} #{seminar.all_day? ? 'all_day' : ''} #{((seminar.internal? and show_internal_seminars? and (show_category?(seminar.category))) or (!seminar.internal? and show_category?(seminar.category))) ? '' : 'hidden_seminar'} " : 'grid_12')}
  .time_and_location.grid_3
    = seminar.category.name
    %br
    = seminar.schedule
    %br
    = seminar.location.name_and_building
    - unless seminar.hosts.empty?
      %br
      Hosted by
      = seminar.hosts.map{|s| mail_to(s.email, s.name, :encode => 'hex')}.join(', ')
    - unless seminar.user.blank?
      %br
      %span{:style => 'font-size: smaller'}
        Created by
        = seminar.user.name
  .title_and_content{:class => (params[:action] == 'index' and params[:controller] == 'seminars' ? "grid_6" : "grid_9")}
    - if seminar.internal?
      %p.alert_internal
        This seminar is not public
    - unless seminar.mini_seminar_title.blank?
      %h2
        = seminar.mini_seminar_title
    - if seminar.only_one_speaker?
      %p
        by
        = seminar.speakers.map{|s| s.bold_name_and_affiliation}.join(', ')
    - else
      %dl
        - for speaker in seminar.speakers
          %dt
            = speaker.title
          %dd
            by
            = h(speaker.name_and_affiliation)
    - unless seminar.description.blank?
      %p
        =h seminar.description
    - unless seminar.documents.blank?
      #documents
        %h3
          Attached documents
        %ul
          - for doc in seminar.documents
            %li
              = doc.data_file_name
              = "#{link_to '('+number_to_human_size(doc.data_file_size)+')', doc.data.url }"
       
    - unless seminar.pictures.blank?
      #pictures
        %ul
          - for pic in seminar.pictures
            %li
              = link_to(image_tag(pic.data.url(:thumb)), pic.data.url, :id => "link_to_picture_#{pic.id}", :rel => 'lightbox')
        .clear
    - unless seminar.publications.blank?
      .seminar_publications{:id => "publications_for_seminar_#{seminar.id}"}
        %noscript
          = link_to "#{pluralize(seminar.publications.size, 'publication')} are associated with this seminar", "http://www.ncbi.nlm.nih.gov/pubmed/#{seminar.publications.map(&:pmid).join(',')}"
        %p#big_ajax_loader
          Publications loading ...
          = image_tag 'ajax-loader_big.gif'
    %p.admin_links
      - links = [link_to('Save in iCal', seminar_path(seminar, :format => 'ics'))]
      - links << link_to('Website', seminar.url) unless seminar.url.blank?
      - links << link_to('Details', seminar_path(seminar)) unless params[:action] == 'show' and params[:controller] == 'seminars'
      - if logged_in? and seminar.editable_or_destroyable_by_user?(current_user)
        - links << edit_link(seminar)
        - links << destroy_link(seminar)
      = links.join(' Â· ')
    .clear
.clear