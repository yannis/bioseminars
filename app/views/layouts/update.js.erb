<%- object = eval("@"+params[:controller].singularize) -%>
<%- obj_sym = object.class.to_s.humanize.downcase -%>
<% unless flash[:alert].blank? %>
var classes = $('#{obj_sym}_#{object.id}').classNames();
$.gritter.add({title: 'warning', class_name: 'warning',	text: "<%= flash[:alert] %>"});
$('#new_or_edit_form').html("<%= escape_javascript(render('layouts/edit_box', :object => object)) %>")
<% end %>
<% unless flash[:notice].blank? %>
$.gritter.add({title: 'notice', class_name: 'notice',	text: '<%= flash[:notice] %>'});
$("#<%= obj_sym %>_<%= object.id %>").replaceWith("<%= escape_javascript(render(obj_sym, obj_sym.to_sym => object)) %>");
$('#new_or_edit_form').html("<%= escape_javascript(render('layouts/new_box', :object => object.class.new)) %>")
$('#<%= obj_sym %>_<%= object.id %>').effect("highlight", {}, 3000);
<% end %>
<% flash.discard %>