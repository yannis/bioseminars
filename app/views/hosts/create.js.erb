<%= flash_in_js %>
<%- if flash[:alert].blank? -%>
if ($('#<%= params[:controller] %>_div').length != 0) {remove_div_and_overlay('<%= params[:controller] %>_div')};
<%- html =  options_from_collection_for_select(Host.find(:all), :id, :name)  -%>
var dropdowns = $("select[name*=hostings_attributes]");
dropdowns.each(function(){
  var selected_value = $(this).val();
  $(this).html('<%= escape_javascript(html).html_safe %>');
  if ($(this).attr('id') == '<%= @origin %>_host_id') {
    $(this).val('<%= @host.id %>');
  } else {
    $(this).val(selected_value);
  }
})
$('#<%= @origin %>_host_id').parent('div').effect("highlight", {}, 3000);
<%- html = link_to_insert(Hosting.new) -%>
$('#add_a_hosting').replaceWith('<%= escape_javascript(html).html_safe %>')
<%- else -%>
<%- html =  "#{render 'layouts/new'}<img class='zoom_close' width='30' height='30' border='0' src='/images/closebox.png' />"  -%>
$('#<%= params[:controller] %>_div').html('<%= escape_javascript(html).html_safe %>');
$('#<%= params[:controller] %>_div').effect("highlight", {}, 3000);
<%- end -%>
<%- flash.discard -%>